### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### [v1.36.2](https://github.com/DEFRA/water-abstraction-import/compare/v1.36.1...v1.36.2)

> 25 February 2020

- Bug fix/update connection pool allocation [`#146`](https://github.com/DEFRA/water-abstraction-import/pull/146)
- Fix: Reallocate database connections [`bec82a0`](https://github.com/DEFRA/water-abstraction-import/commit/bec82a046945815b002c01520e042a34ba9465b0)

#### [v1.36.1](https://github.com/DEFRA/water-abstraction-import/compare/v1.34.0...v1.36.1)

> 25 February 2020

- Import start, expired, lapsed and revoked dates & suspend_from_billing flag [`#144`](https://github.com/DEFRA/water-abstraction-import/pull/144)
- Chore: Updates node version in .nvmrc [`#141`](https://github.com/DEFRA/water-abstraction-import/pull/141)
- Chore: Updates node version in .nvmrc [`#139`](https://github.com/DEFRA/water-abstraction-import/pull/139)
- Chore: Pre work for upgrading to Node v12 [`#135`](https://github.com/DEFRA/water-abstraction-import/pull/135)
- Chore: Update connection pool distribution [`#134`](https://github.com/DEFRA/water-abstraction-import/pull/134)
- Feat: Import licences [`#131`](https://github.com/DEFRA/water-abstraction-import/pull/131)
- Feat: More graceful shutdown [`#128`](https://github.com/DEFRA/water-abstraction-import/pull/128)
- Use db.createPool from water-abstraction-helpers [`#126`](https://github.com/DEFRA/water-abstraction-import/pull/126)
- Fix: Remove increment from document external id [`#123`](https://github.com/DEFRA/water-abstraction-import/pull/123)
- Fix: Wait for companies to be saved [`#122`](https://github.com/DEFRA/water-abstraction-import/pull/122)
- Fix: Updates the connection pool allocations [`be3cf63`](https://github.com/DEFRA/water-abstraction-import/commit/be3cf6370a61f0a1b0e11dd3e215ab48f3c30945)
- Updates conflict index to remove region id [`2534679`](https://github.com/DEFRA/water-abstraction-import/commit/2534679a402e9ff7e0a86cab1c7e7ab190c36f0a)

#### [v1.34.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.33.0...v1.34.0)

> 26 November 2019

- Amend import process to import all companies before licences [`#120`](https://github.com/DEFRA/water-abstraction-import/pull/120)
- Chore/security recommendations [`#117`](https://github.com/DEFRA/water-abstraction-import/pull/117)
- Modifies ID columns in charge_agreements, charge_elements and charge_versions to uuid [`#118`](https://github.com/DEFRA/water-abstraction-import/pull/118)
- WATER-2322: importing CRM v2 data from import tables [`#116`](https://github.com/DEFRA/water-abstraction-import/pull/116)
- Remove section 127/130 agreements from charge elements [`#113`](https://github.com/DEFRA/water-abstraction-import/pull/113)

#### [v1.33.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.32.0...v1.33.0)

> 13 November 2019

- Feat/crm v2 mapping [`#112`](https://github.com/DEFRA/water-abstraction-import/pull/112)
- Re-organise code into extract/transform/load steps [`6c99005`](https://github.com/DEFRA/water-abstraction-import/commit/6c990050b042185e2726f4306e3468a905a7ab57)
- Remove existing CRM import code [`041593c`](https://github.com/DEFRA/water-abstraction-import/commit/041593c1a55c2b099dee507598f03121c6cb6d5e)
- Add tests for licence import load connectors [`cfa33ca`](https://github.com/DEFRA/water-abstraction-import/commit/cfa33ca7e33a0b9eacd1956a9731b92d37a83290)
- Import licence agreements.  Add tests for handler functions [`c8f77b1`](https://github.com/DEFRA/water-abstraction-import/commit/c8f77b1eb08a7ae28ab01b673a63eefd5598013f)
- Initial work on mapping company data [`c9920df`](https://github.com/DEFRA/water-abstraction-import/commit/c9920df4d212cb7e3dbc860b001eab2749fb17b4)
- Remove unwanted code, add tests of licence import extract functions [`9a13fdb`](https://github.com/DEFRA/water-abstraction-import/commit/9a13fdb260475197eeb9fcf3d628c39a2cc58777)
- Add tests for company mapping [`0379cb0`](https://github.com/DEFRA/water-abstraction-import/commit/0379cb00210fd50dc4eeee78a4805a2bd65713e4)
- Improve orchestration of import to do related companies of licence and then company.  Disable import in production [`8f8daa4`](https://github.com/DEFRA/water-abstraction-import/commit/8f8daa45b6f8eccb69dc58946152185a1d3774f4)
- Add test for more complex licence with agreements [`3af4aba`](https://github.com/DEFRA/water-abstraction-import/commit/3af4abae4937ec08fdba8582255e91ab1d2a8134)
- Add test for company loader [`2cc10e8`](https://github.com/DEFRA/water-abstraction-import/commit/2cc10e8202101c0968f8a8d25e54cdd055e011e6)
- Add test for licence import plugin [`de6c226`](https://github.com/DEFRA/water-abstraction-import/commit/de6c22623431be97213e42ecd88380b4d4083c09)
- Add tests for importing companies [`01ae2d4`](https://github.com/DEFRA/water-abstraction-import/commit/01ae2d48b6a2d6f01ef4d5e76c6d315618917a85)
- Add tests for licence loader [`ae07c84`](https://github.com/DEFRA/water-abstraction-import/commit/ae07c841fe2d7bbec4a4476b24100bd164a38d5f)
- Add controller tests [`41e8256`](https://github.com/DEFRA/water-abstraction-import/commit/41e82565272aced32daede2c27181e088dc39ef1)
- Additional tests for date mappers and PG Boss plugin [`c25d365`](https://github.com/DEFRA/water-abstraction-import/commit/c25d36577168015866b645141f4d7e2ba209ef57)
- Review comments [`b2ec979`](https://github.com/DEFRA/water-abstraction-import/commit/b2ec97969a3e155b4fdef2fb2ee045d866668915)
- Add tests for job creators [`a697777`](https://github.com/DEFRA/water-abstraction-import/commit/a6977770c62864125d5b477036273c45b3c56b4e)
- Add tests for invoice account/addresses [`561a248`](https://github.com/DEFRA/water-abstraction-import/commit/561a24888e44c2d6ca85e3b3b587fbb678b4420a)
- Additional tests for company-contact.js [`0336c80`](https://github.com/DEFRA/water-abstraction-import/commit/0336c80f3d9a34581fa2b65315308de866c9074b)
- Add support for contact initials [`1696fa4`](https://github.com/DEFRA/water-abstraction-import/commit/1696fa417d8cf9ae1159e3834d8210cde1484a52)
- Fix all licences query [`73112e4`](https://github.com/DEFRA/water-abstraction-import/commit/73112e43bce1503a367794873cc1ca43b99988f2)
- Fix linter errors [`db251e1`](https://github.com/DEFRA/water-abstraction-import/commit/db251e12a42a62bddd026ee4f69417a5f92ec5eb)
- Bugfix [`0b3fc6e`](https://github.com/DEFRA/water-abstraction-import/commit/0b3fc6eda3bca98d5ef0528c58521456ae6fc510)

#### [v1.32.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.31.0...v1.32.0)

> 30 October 2019

- Feat: Renames ias account number [`#111`](https://github.com/DEFRA/water-abstraction-import/pull/111)
- Initial work on mapping CRM data in JS [`b630bb5`](https://github.com/DEFRA/water-abstraction-import/commit/b630bb5e0103c4913380726dca6339e711518373)
- Add two-part tariff and account agreements [`d1a8765`](https://github.com/DEFRA/water-abstraction-import/commit/d1a876508fa7367f573df82c0e6df633a619f7f6)
- Add initial unit tests [`93b1685`](https://github.com/DEFRA/water-abstraction-import/commit/93b1685f24e465b9a3e6c5769a4e63c11b77346e)
- Move all database access code to connectors directory. [`9cda0b9`](https://github.com/DEFRA/water-abstraction-import/commit/9cda0b931e15a8a6d8e2c6253175837f671f57ea)
- Add tests for import connector [`97623f3`](https://github.com/DEFRA/water-abstraction-import/commit/97623f387c9e9272fe00e91a7475e44a56198197)
- Fix CodeClimate issues [`276ba50`](https://github.com/DEFRA/water-abstraction-import/commit/276ba50e3b95558f117221cba023af18e3375e45)
- Add test for a licence with multiple versions [`57c3624`](https://github.com/DEFRA/water-abstraction-import/commit/57c36246cc0060cba5b3ad4cb763cf5c17b684db)
- Add tests for S130/S127 agreements [`487230f`](https://github.com/DEFRA/water-abstraction-import/commit/487230fd8d28288e9b3a30ee7f54f239a0291325)
- Add tests for date mappers [`b7a3747`](https://github.com/DEFRA/water-abstraction-import/commit/b7a37473793d3075e802d536b72b91d5947a3bf8)
- Add test for mapping document billing roles [`d3d2646`](https://github.com/DEFRA/water-abstraction-import/commit/d3d26460b6cdd8ceff8d8d6e10d6d50ddfae9f08)
- Add tests for contact mapping [`b851138`](https://github.com/DEFRA/water-abstraction-import/commit/b8511386c1bbb6d90617df1aa93f0915fdb620f4)
- Remove dead code, improve comments [`4b98965`](https://github.com/DEFRA/water-abstraction-import/commit/4b98965c09f49df0bc1c6d7f1cf753d4a88dfe56)
- Remove invalid billing roles [`d154905`](https://github.com/DEFRA/water-abstraction-import/commit/d154905def883aa93c419f5771733978e7198f1c)
- Ensure all DB calls are stubbed in unit test [`38932ec`](https://github.com/DEFRA/water-abstraction-import/commit/38932ecfce7e7399e9e6d4e8eba904695495be75)
- Remove charge element-level agreements which have been moved to licence level (S127, S130) [`d2e3ff5`](https://github.com/DEFRA/water-abstraction-import/commit/d2e3ff5f07da09147540006e50c37ed03dfbf059)

#### [v1.31.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.30.0...v1.31.0)

> 15 October 2019

- Chore: Adds linting back into tests [`#106`](https://github.com/DEFRA/water-abstraction-import/pull/106)
- Feat/import licence holders [`#105`](https://github.com/DEFRA/water-abstraction-import/pull/105)
- Fix issue with charge version query [`#104`](https://github.com/DEFRA/water-abstraction-import/pull/104)
- Feat/water 2322 import ias accounts [`#102`](https://github.com/DEFRA/water-abstraction-import/pull/102)

#### [v1.30.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.29.0...v1.30.0)

> 7 October 2019

- Import versioned CRM documents with dates and status [`#98`](https://github.com/DEFRA/water-abstraction-import/pull/98)

#### [v1.29.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.28.0...v1.29.0)

> 4 September 2019

- Feat/water 2262 financial agreements [`#97`](https://github.com/DEFRA/water-abstraction-import/pull/97)
- Feat: Adds purposes to charging import [`#95`](https://github.com/DEFRA/water-abstraction-import/pull/95)
- Feat/water 2209 charge import [`#93`](https://github.com/DEFRA/water-abstraction-import/pull/93)
- WATER-2209 [`de35554`](https://github.com/DEFRA/water-abstraction-import/commit/de355543dc6ea143b739de60b1726e52136b2acf)
- Updates import queries to use explicit date conversions [`76e2ccf`](https://github.com/DEFRA/water-abstraction-import/commit/76e2ccff5913ac8a5aac0c17b43809ef3790dd9c)
- Adds the db:migrate task as a placeholder [`f22a4a6`](https://github.com/DEFRA/water-abstraction-import/commit/f22a4a6007d426268df603d8426d3aa3c86290c4)

#### [v1.28.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.27.0...v1.28.0)

> 22 August 2019

- Merge tag 'charging-sprint-1' into develop [`0992597`](https://github.com/DEFRA/water-abstraction-import/commit/09925976041ace135a374929e133ae1aa5fd42cf)

#### [v1.27.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.26.0...v1.27.0)

> 24 July 2019

#### [v1.26.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.25.0...v1.26.0)

> 9 July 2019

- Feat: Adds version number to status check output [`#88`](https://github.com/DEFRA/water-abstraction-import/pull/88)

#### [v1.25.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.24.0...v1.25.0)

> 27 June 2019

- Feat: Adds version number to status check output [`4611952`](https://github.com/DEFRA/water-abstraction-import/commit/461195259088ac91e30c34db9204cae4a5dad159)

#### [v1.24.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.23.0...v1.24.0)

> 12 June 2019

- Chore: Use port from config not environment [`#86`](https://github.com/DEFRA/water-abstraction-import/pull/86)

#### [v1.23.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.22.0...v1.23.0)

> 29 May 2019

- Chore: Update logger to latest version [`#85`](https://github.com/DEFRA/water-abstraction-import/pull/85)
- Chore: Updates eslint and adds ignore file [`#80`](https://github.com/DEFRA/water-abstraction-import/pull/80)

#### [v1.22.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.20.1...v1.22.0)

> 15 May 2019

- Remove local logger [`#77`](https://github.com/DEFRA/water-abstraction-import/pull/77)

#### [v1.20.1](https://github.com/DEFRA/water-abstraction-import/compare/v1.19.0...v1.20.1)

> 23 April 2019

- Only log error level messages in production [`#75`](https://github.com/DEFRA/water-abstraction-import/pull/75)

#### [v1.19.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.18.0...v1.19.0)

> 2 April 2019

#### [v1.18.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.4.0...v1.18.0)

> 19 March 2019

- Chore: Corrects version number [`72fbd01`](https://github.com/DEFRA/water-abstraction-import/commit/72fbd01e35243d03ca1be833c1e99bd82855e66b)

#### [v1.4.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.3.0...v1.4.0)

> 7 February 2019

- Adds return_cycle_start date to return responses [`#50`](https://github.com/DEFRA/water-abstraction-import/pull/50)
- Merge tag 'public_beta_1.16' into develop [`41f7dd3`](https://github.com/DEFRA/water-abstraction-import/commit/41f7dd3ff76d5d4429abfdf90e2d78e79520c30d)

#### [v1.3.0](https://github.com/DEFRA/water-abstraction-import/compare/v1.2.0...v1.3.0)

> 23 January 2019

#### v1.2.0

> 12 December 2018

- Feat: Use logger instead of request.log for errors [`#36`](https://github.com/DEFRA/water-abstraction-import/pull/36)
- Use NPM module for hapi-pg-rest-api [`#34`](https://github.com/DEFRA/water-abstraction-import/pull/34)
- Bump hapi from 17.5.4 to 17.8.1 [`#30`](https://github.com/DEFRA/water-abstraction-import/pull/30)
- Bump eslint from 5.5.0 to 5.9.0 [`#23`](https://github.com/DEFRA/water-abstraction-import/pull/23)
- Bump code from 5.2.0 to 5.2.4 [`#29`](https://github.com/DEFRA/water-abstraction-import/pull/29)
- Feat: Tidy env variables [`#24`](https://github.com/DEFRA/water-abstraction-import/pull/24)
- Feat: Align with develop standards [`#27`](https://github.com/DEFRA/water-abstraction-import/pull/27)
- Fix: Use Sun - Sat weeks for NALD [`#25`](https://github.com/DEFRA/water-abstraction-import/pull/25)
- Output under_query_comment as empty string if null [`#16`](https://github.com/DEFRA/water-abstraction-import/pull/16)
- Feat: Adds proxy support for logging to Errbit [`#15`](https://github.com/DEFRA/water-abstraction-import/pull/15)
- Add returns endpoint [`#14`](https://github.com/DEFRA/water-abstraction-import/pull/14)
- Feat: Improve logging [`#13`](https://github.com/DEFRA/water-abstraction-import/pull/13)
- Only filter lines if weekly [`#12`](https://github.com/DEFRA/water-abstraction-import/pull/12)
- Filter any lines out of response which are outside the return cycle s… [`#11`](https://github.com/DEFRA/water-abstraction-import/pull/11)
- Modify nald_date_from to give the first of the month containing the r… [`#10`](https://github.com/DEFRA/water-abstraction-import/pull/10)
- For weekly returns, output nulls on non-Saturdays.  For nil returns, … [`#9`](https://github.com/DEFRA/water-abstraction-import/pull/9)
- Fix: Update airbrake js [`#8`](https://github.com/DEFRA/water-abstraction-import/pull/8)
- Feat/water 1550 [`#7`](https://github.com/DEFRA/water-abstraction-import/pull/7)
- Feat: Separate test tasks [`#6`](https://github.com/DEFRA/water-abstraction-import/pull/6)
- Fix: Handle null quantities [`#4`](https://github.com/DEFRA/water-abstraction-import/pull/4)
- Feat: Extra data for NALD export resources [`#3`](https://github.com/DEFRA/water-abstraction-import/pull/3)
- Feature: Reduce /etl/versions payload [`#2`](https://github.com/DEFRA/water-abstraction-import/pull/2)
- Feature: Get versions and lines for NALD [`#1`](https://github.com/DEFRA/water-abstraction-import/pull/1)
- Adds basic project content [`4a488f8`](https://github.com/DEFRA/water-abstraction-import/commit/4a488f8febf233dbf2bf7aa44adff1298cf7d2b6)
- Update package.json [`25be883`](https://github.com/DEFRA/water-abstraction-import/commit/25be8839fdb3092973c8d10db4f186b5e3238f17)
- Filter any lines out of response which are outside the return cycle start/end dates [`b87f08b`](https://github.com/DEFRA/water-abstraction-import/commit/b87f08b13aac2caa825f28328e799ba824de51f0)
- Add unit test [`d983a8c`](https://github.com/DEFRA/water-abstraction-import/commit/d983a8c451c267237e8164a32ba901d8b1858880)
- Adds testing resource [`fee0a7c`](https://github.com/DEFRA/water-abstraction-import/commit/fee0a7c05ad7e62ef0013fad0d7de6b5176b5ea4)
- Adds temporary testing route [`87c89ac`](https://github.com/DEFRA/water-abstraction-import/commit/87c89acf8b0d385d394be5124afe7a92762b44b6)
- For weekly returns, output nulls on non-Saturdays.  For nil returns, only output 0s for weeks with end date inside abstraction period. [`cb3f49c`](https://github.com/DEFRA/water-abstraction-import/commit/cb3f49c0a933ff3a7326488d98dbf91675a3c358)
- Bumps up har-validator version [`b4f4b9c`](https://github.com/DEFRA/water-abstraction-import/commit/b4f4b9c9f3a04b5a3452238f01bf4657daedc164)
- Modify nald_date_from to give the first of the month containing the return start_date.  This makes it easier for ETL to locate first form log. [`1ec0fa5`](https://github.com/DEFRA/water-abstraction-import/commit/1ec0fa5efafba45346e206154a897a7efb0e3e49)
- Fix linter errors [`cbb9e01`](https://github.com/DEFRA/water-abstraction-import/commit/cbb9e0112113462f431e1fb617712168008abf6b)
- Bump to 1.14 [`024a318`](https://github.com/DEFRA/water-abstraction-import/commit/024a318335186fa6b586ab9857173cc82ca5b1d5)
- Fix: Fixes argument signature for getLines [`a19540c`](https://github.com/DEFRA/water-abstraction-import/commit/a19540c279f2c6b4d422e5225da82a0a9e63375a)
- Merge tag 'public_beta_1.11' into develop [`dc50a5a`](https://github.com/DEFRA/water-abstraction-import/commit/dc50a5a22b5f8d15ae3b62332004af682e2801ba)
- Merge tag 'public_beta_1.9' into develop [`73009f8`](https://github.com/DEFRA/water-abstraction-import/commit/73009f8961d5ff705edd701ec2fd5ab8677f1c56)
- Merge tag 'public_beta_1.8' into develop [`2252af3`](https://github.com/DEFRA/water-abstraction-import/commit/2252af3e97ef288d91b545be8c566ef9ce74a183)
- first commit [`513a8f5`](https://github.com/DEFRA/water-abstraction-import/commit/513a8f55b8c499f59d1eec0676eb16325cc06038)
